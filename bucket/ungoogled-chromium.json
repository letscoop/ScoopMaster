{
  "version": "144.0.7559.109-1.1",
  "description": "Ungoogled Chromium - Google Chromium without Google's integration",
  "homepage": "https://api.github.com/repos/ungoogled-software/ungoogled-chromium-windows/releases/latest",
  "license": "BSD-3-Clause",
  "url": "https://github.com/ungoogled-software/ungoogled-chromium-windows/releases/download/144.0.7559.109-1.1/ungoogled-chromium_144.0.7559.109-1.1_windows_x64.zip",
  "hash": "sha256:0708d2c1fb5100d813784a43d7ff14932023eeea97624924826e55afbf04cdf8",
  "bin": "chrome.exe",
  "shortcuts": [
    [
      "chrome.exe",
      "Ungoogled Chromium"
    ]
  ],
  "extract_dir": "ungoogled-chromium_143.0.7499.169-1.1_windows_x64",
  "post_install": [
    "$shouldRun = $false",
    "if ($env:SCOOP_SET_DEFAULT_BROWSER -eq '1') { $shouldRun = $true }",
    "elseif ($env:SCOOP_INTERACTIVE -eq '1') {",
    "  $ans = Read-Host 'Do you want to set Ungoogled Chromium as your default browser? (y/n)'",
    "  if ($ans -match '^(y|Y)$') { $shouldRun = $true }",
    "}",
    "if ($shouldRun) {",
    "  Write-Host 'Setting Ungoogled Chromium as default browser...'",
    "  $chromePath = \"$dir\\chrome.exe\"",
    "  $chromiumUserDataDir = \"$dir\\User Data\"",
    "  $chromeArgs = \"--user-data-dir=``\"$chromiumUserDataDir``\" --disable-machine-id --disable-encryption --no-default-browser-check\"",
    "  $registryPaths = @(HKCU:\\Software\\Classes\\ChromiumHTML\\shell\\open\\command, HKCU:\\Software\\Classes\\http\\shell\\open\\command, HKCU:\\Software\\Classes\\https\\shell\\open\\command)",
    "  foreach ($path in $registryPaths) {",
    "    if (!(Test-Path $path)) { New-Item -Path $path -Force | Out-Null }",
    "    $commandValue = \"``\"$chromePath``\" $chromeArgs -- ``\"%1``\"\"",
    "    Set-ItemProperty -Path $path -Name '(Default)' -Value $commandValue -Type String -ErrorAction SilentlyContinue",
    "  }",
    "  $progId = 'ChromiumHTML'",
    "  if (!(Test-Path \"HKCU:\\Software\\Classes\\$progId\")) { New-Item -Path \"HKCU:\\Software\\Classes\\$progId\" -Force | Out-Null }",
    "  Set-ItemProperty -Path \"HKCU:\\Software\\Classes\\$progId\" -Name '(Default)' -Value 'Chromium HTML Document' -Type String -ErrorAction SilentlyContinue",
    "  $chromiumAppPath = 'HKCU:\\Software\\Clients\\StartMenuInternet\\Chromium\\shell\\open\\command'",
    "  if (!(Test-Path $chromiumAppPath)) { New-Item -Path $chromiumAppPath -Force | Out-Null }",
    "  Set-ItemProperty -Path $chromiumAppPath -Name '(Default)' -Value \"``\"$chromePath``\" $chromeArgs\" -Type String -ErrorAction SilentlyContinue",
    "  $httpUserChoice = 'HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice'",
    "  $httpsUserChoice = 'HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\https\\UserChoice'",
    "  foreach ($uc in @($httpUserChoice, $httpsUserChoice)) {",
    "    if (Test-Path $uc) {",
    "      $currentProgId = (Get-ItemProperty -Path $uc -ErrorAction SilentlyContinue).ProgId",
    "      if ($currentProgId) {",
    "        $progIdPath = \"HKCU:\\Software\\Classes\\$currentProgId\\shell\\open\\command\"",
    "        if (!(Test-Path $progIdPath)) { New-Item -Path $progIdPath -Force | Out-Null }",
    "        Set-ItemProperty -Path $progIdPath -Name '(Default)' -Value \"``\"$chromePath``\" $chromeArgs -- ``\"%1``\"\" -Type String -ErrorAction SilentlyContinue",
    "      }",
    "    }",
    "  }",
    "  Write-Host 'Registry updated. Opening Default Apps settings for any remaining configuration...' -ForegroundColor Yellow",
    "  try { Start-Process 'ms-settings:defaultapps' } catch { Write-Host 'Could not open Default Apps settings automatically.' -ForegroundColor Yellow }",
    "} else {",
    "  Write-Host 'Skipping default browser setup. To run automatically, set env var SCOOP_SET_DEFAULT_BROWSER=1 before install.'",
    "}"
  ],
  "persist": "User Data",
  "checkver": {
    "url": "https://api.github.com/repos/ungoogled-software/ungoogled-chromium-windows/releases/latest",
    "regex": "\"tag_name\":\\s*\"([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+-[0-9]+\\.[0-9]+)\""
  },
  "autoupdate": {
    "url": "https://github.com/ungoogled-software/ungoogled-chromium-windows/releases/download/$version/ungoogled-chromium_$version_windows_x64.zip"
  }
}
